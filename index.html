<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Citas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, sans-serif;
}
body{
  background:#000;
  color:#fff;
  height:100vh;
}
.screen{
  display:none;
  height:100vh;
}
.screen.active{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
#app{
  justify-content:space-between;
}
main{
  flex:1;
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}
nav{
  display:flex;
  justify-content:space-around;
  background:#111;
  padding:12px 0;
}
nav button{
  background:none;
  border:none;
  color:#fff;
  font-size:14px;
}
button{
  padding:15px;
  border:none;
  border-radius:10px;
  background:#ff3366;
  color:#fff;
  font-size:16px;
}
img{
  width:120px;
  height:120px;
  border-radius:50%;
  object-fit:cover;
}
</style>

</head>
<body>

<!-- LOGIN -->
<section id="login" class="screen active">
  <h1>CITAS</h1>
  <br>
  <button id="btnGoogle">Entrar con Google</button>
</section>

<!-- APP -->
<section id="app" class="screen">

  <main id="content">
    <div id="home">
      <h2>Bienvenido</h2>
      <br>
      <img id="userPhoto">
      <p id="userName"></p>
    </div>
  </main>

  <nav>
    <button onclick="changeTab('Inicio')">Inicio</button>
    <button onclick="changeTab('Descubrir')">Descubrir</button>
    <button onclick="changeTab('Chat')">Chat</button>
    <button onclick="changeTab('Perfil')">Perfil</button>
  </nav>

</section>

<!-- FIREBASE + APP -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import {
  getAuth,
  GoogleAuthProvider,
  signInWithPopup,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBszwdqJLY0GiPNlxh37_wNpSsIm0y9N0c",
  authDomain: "chat-1adf8.firebaseapp.com",
  projectId: "chat-1adf8",
  storageBucket: "chat-1adf8.firebasestorage.app",
  messagingSenderId: "466107819820",
  appId: "1:466107819820:web:e297a7c513db3d96696e89"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const login = document.getElementById("login");
const appScreen = document.getElementById("app");
const userPhoto = document.getElementById("userPhoto");
const userName = document.getElementById("userName");

document.getElementById("btnGoogle").onclick = async ()=>{
  await signInWithPopup(auth, provider);
};

onAuthStateChanged(auth, user=>{
  if(user){
    login.classList.remove("active");
    appScreen.classList.add("active");
    userPhoto.src = user.photoURL;
    userName.innerText = user.displayName;
  }
});

window.changeTab = (name)=>{
  document.getElementById("content").innerHTML =
    `<h2>${name}</h2>`;
};
</script>

</body>
</html>
