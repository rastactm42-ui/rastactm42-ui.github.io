<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Chat</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#000,#1a0033,#000);
  color:#fff;
}
.container{
  max-width:400px;
  margin:50px auto;
  background:rgba(0,0,0,.9);
  padding:20px;
  border-radius:16px;
  box-shadow:0 0 25px #ff00ff;
}
h2{text-align:center;color:#ff00ff}
input,select,button{
  width:100%;padding:12px;margin:6px 0;
  border:none;border-radius:8px;
}
input,select{background:#111;color:#fff;border:1px solid #333}
button{
  background:linear-gradient(90deg,#ff00ff,#ff0066);
  color:#fff;font-weight:bold;cursor:pointer;
}
#chat{display:none}
#mensajes{
  height:220px;overflow-y:auto;
  background:#000;border:1px solid #333;
  padding:10px;margin-bottom:8px;
}
.mensaje{margin-bottom:6px}
.hombre{color:#4da6ff}
.chica{color:#ff66cc}
.regalo{color:#ffd700;font-weight:bold}
.panel{font-size:14px;margin-bottom:6px}
</style>
</head>

<body>

<div class="container" id="login">
  <h2>ğŸ”¥ CHAT ğŸ”¥</h2>
  <input id="usuario" placeholder="Correo o nÃºmero">
  <select id="tipo">
    <option value="hombre">ğŸ‘¨ Hombre</option>
    <option value="chica">ğŸ‘© Chica</option>
  </select>
  <button onclick="entrar()">ENTRAR</button>
</div>

<div class="container" id="chat">
  <h2>ğŸ’¬ CHAT</h2>

  <div class="panel">
    ğŸ‘¤ <span id="infoUser"></span><br>
    ğŸ’° Monedas: <span id="monedas">0</span>
  </div>

  <div id="mensajes"></div>

  <input id="texto" placeholder="Escribe un mensaje">
  <button onclick="enviar()">ENVIAR</button>
  <button onclick="regalo()">ğŸ Enviar regalo (10)</button>
  <button onclick="salir()">ğŸšª Salir</button>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// CONFIG FIREBASE
const firebaseConfig = {
  apiKey: "AIzaSyBszwdqJLY0GiPNlxh37_wNpSsIm0y9N0c",
  authDomain: "chat-1adf8.firebaseapp.com",
  projectId: "chat-1adf8",
  storageBucket: "chat-1adf8.firebasestorage.app",
  messagingSenderId: "466107819820",
  appId: "1:466107819820:web:e297a7c513db3d96696e89"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// CHAT
let user="", tipo="", monedas=0;

function guardar(){
  localStorage.setItem("user",user);
  localStorage.setItem("tipo",tipo);
  localStorage.setItem("monedas",monedas);
}

function cargar(){
  user=localStorage.getItem("user");
  tipo=localStorage.getItem("tipo");
  monedas=parseInt(localStorage.getItem("monedas")||"100");
  if(user && tipo){
    login.style.display="none";
    chat.style.display="block";
    infoUser.innerText=user+" ("+tipo+")";
    monedasEl.innerText=monedas;
  }
}

function entrar(){
  user=usuario.value;
  tipo=tipoEl.value;
  if(!user) return alert("Ingresa correo o nÃºmero");
  monedas=100;
  guardar();
  cargar();
}

function enviar(){
  if(!texto.value) return;
  db.collection("mensajes").add({
    user,
    tipo,
    texto:texto.value,
    time:Date.now()
  });
  texto.value="";
}

db.collection("mensajes").orderBy("time")
.onSnapshot(s=>{
  mensajes.innerHTML="";
  s.forEach(d=>{
    const m=d.data();
    const div=document.createElement("div");
    div.className="mensaje "+m.tipo;
    div.textContent=m.user+": "+m.texto;
    mensajes.appendChild(div);
  });
});

function regalo(){
  if(tipo!=="hombre") return alert("Solo hombres envÃ­an regalos");
  if(monedas<10) return alert("Sin monedas");
  monedas-=10;
  monedasEl.innerText=monedas;
  guardar();
  db.collection("mensajes").add({
    user,
    tipo:"regalo",
    texto:"ğŸ EnviÃ³ un regalo",
    time:Date.now()
  });
}

function salir(){
  localStorage.clear();
  location.reload();
}

const usuario=document.getElementById("usuario");
const tipoEl=document.getElementById("tipo");
const texto=document.getElementById("texto");
const mensajes=document.getElementById("mensajes");
const monedasEl=document.getElementById("monedas");
const infoUser=document.getElementById("infoUser");
const login=document.getElementById("login");
const chat=document.getElementById("chat");

cargar();
</script>

</body>
</html>
